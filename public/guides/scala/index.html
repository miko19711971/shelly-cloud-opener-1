<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Guest Help ‚Äî Via della Scala 17</title>
<link rel="icon" type="image/jpeg" href="logo-niceflatinrome.jpg">
<style>
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#f6f6f6}
.wrap{max-width:760px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column}
header{position:sticky;top:0;background:#fff;border-bottom:1px solid #e0e0e0;padding:10px 14px;z-index:10}
.h-row{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.h-left{display:flex;align-items:center;gap:10px}
.brand{font-weight:700;color:#a33}
.apt{margin-left:auto;opacity:.75}
img.logo{height:36px;width:auto;display:block}
.controls{display:flex;gap:8px;margin-top:8px;align-items:center;flex-wrap:wrap}
.lang{display:flex;gap:6px;margin-left:auto}
.lang button{border:1px solid #ddd;background:#fff;padding:6px 8px;border-radius:10px;cursor:pointer;font-size:13px}
.lang button[aria-current="true"]{background:#2b2118;color:#fff;border-color:#2b2118}
#voiceBtn{padding:8px 10px;border:1px solid #ddd;background:#fff;border-radius:10px;cursor:pointer;font-size:14px}
#voiceBtn[aria-pressed="true"]{background:#2b2118;color:#fff;border-color:#2b2118}
main{flex:1;padding:12px}
.msg{max-width:85%;line-height:1.35;border-radius:12px;padding:10px 12px;margin:8px 0;white-space:normal;word-break:break-word}
.msg.wd{background:#fff;border:1px solid #e0e0e0}
.msg.me{background:#e8f0fe;border:1px solid #c5d5ff;margin-left:auto}
.msg a{color:#a33;text-decoration:underline}
.quick{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}
.quick button{border:1px solid #d6c5b8;background:#fff;color:#333;padding:6px 10px;border-radius:12px;cursor:pointer}
.quick button:active{transform:translateY(1px)}
footer{position:sticky;bottom:0;background:#fff;display:flex;gap:8px;padding:10px;border-top:1px solid #e0e0e0}
input{flex:1;padding:12px;border:1px solid #cbd5e1;border-radius:10px;outline:none}
#sendBtn{padding:12px 14px;border:1px solid #2b2118;background:#2b2118;color:#fff;border-radius:10px;cursor:pointer}
.intro{background:#fff;border:1px solid #e0e0e0;padding:12px;border-radius:12px;margin:12px 0}
.intro b{display:block;margin-bottom:6px}
.small{opacity:.7;font-size:12px;margin-top:6px}
.fb-box{margin-top:8px;display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.fb-box .fb-label{font-size:12px;opacity:.7;margin-right:4px}
.fb-box button{border:1px solid #ddd;background:#fff;padding:6px 10px;border-radius:999px;cursor:pointer}
.fb-box button:active{transform:scale(0.98)}
.fb-done{font-size:12px;opacity:.8}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="h-row">
      <div class="h-left">
        <img class="logo" src="logo-niceflatinrome.jpg" alt="NiceFlatInRome">
        <div class="brand">niceflatinrome.com</div>
      </div>
      <div class="apt"><span id="aptLabel">Apartment</span>: SCALA17</div>
    </div>
    <div class="controls">
      <button id="voiceBtn" aria-pressed="false" title="Toggle voice">üîá Voice: Off</button>
      <nav class="lang" aria-label="Language">
        <button data-lang="en" aria-current="true">EN</button>
        <button data-lang="it">IT</button>
        <button data-lang="fr">FR</button>
        <button data-lang="de">DE</button>
        <button data-lang="es">ES</button>
      </nav>
    </div>
  </header>
  <main id="chat" aria-live="polite"></main>
  <footer>
    <input id="input" placeholder="Hi, I am Samantha, your virtual guide. Tap a button for a quick answer ‚Äî or type here‚Ä¶" autocomplete="off">
    <button id="sendBtn">Send</button>
  </footer>
</div>
<script>
/* === CONFIG === */
const APARTMENT_ID = "SCALA17";
 const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwJcg_XcZE19sbKPmfZmkGtUqNz7U2eXqsYaTcCQi1feoTcJuYnS7DOpnEyrc3CDvQY/exec";

/* ============ CONTENUTI LOCALIZZATI (SCALA 17) ============ */
const DATA = {
  en: {
    ui: {
      welcome: "Hi, I am Samantha, your virtual guide. Tap a button to get a quick answer.",
      placeholder: "Hi, I am Samantha, your virtual guide. Tap a button for a quick answer ‚Äî or type here‚Ä¶",
      apt_label: "Apartment",
      voice_on: "üîä Voice: On",
      voice_off: "üîá Voice: Off",
      quick: [
        "wifi","check in","check out","water","bathroom","gas","eat","drink","shop","visit","experience","day trips",
        "tickets & events","museums & sites","exhibitions",
        "transport","services","emergency"
      ],
      fallback: "I did not find a direct answer. Try a quick button like wifi, gas, transport, or visit.",
      fb_label:"Was this helpful?",
      fb_like:"üëç Like",
      fb_dislike:"üëé Dislike",
      fb_thanks:"Thanks for your feedback!"
    },
    apt: {
      checkin_time:"15:00", 
      checkout_time:"11:00",
      wifi_note:"The router is on the right side of the living room, resting on a bench. It's a black cylindrical device. Turn it to read SSID and password on the back.",
      wifi_ssid:"See router label", 
      wifi_password:"See router label",
      water_note:"Tap water is safe to drink. Hot water is always on.",
      bathroom_amenities:"Toilet paper, hand soap, hairdryer, and bath mat.",
      towels_note:"Per guest: one large and one medium towel. Bed ready on arrival.",
      gas_steps:"Facing the gas meter: steel lever horizontal = OPEN, pointing down = CLOSED. To cook: choose the burner, press and turn the knob, keep it pressed for a few seconds until the flame is stable, then release.",
      washer_note:"Washing machine manual is in the kitchen drawer. If you can't find it, search for the model online and download the PDF manual.",
      intercom_note:"At the entrance there are two intercom columns. Yours is in the column closest to the door, on the left side, first from the bottom. After the first door, the second intercom corresponds to unit A/1.",
      pharmacy:"Farmacia Trastevere on Viale Trastevere 116. Alternatively, pharmacy near Piazza Trilussa.",
      hospital:"Ospedale Nuovo Regina Margherita on Via Emilio Morosini 30.",
      atms:"Intesa ATM in Piazza Santa Maria in Trastevere and Unicredit on Viale Trastevere 108.",
      sims:"Vodafone on Viale Trastevere 143 and TIM on Piazza San Cosimato 70.",
      laundry:"Self-service laundry on Via della Scala 51.",
      luggage:"Radical Storage points in Trastevere or near Largo Argentina with online booking.",
      transport:"Tram 8 from Trastevere toward Piazza Venezia. Buses 23 and H connect Vatican, Piazza Venezia and Termini. Trastevere is perfect for walking.",
      airports:"Fiumicino: Tram 8 to Trastevere Station then FL1 train, about 45 minutes. Ciampino: Terravision bus or taxi. Private transfer available with Welcome Pickups.",
      taxi:"Radio Taxi 06 3570 or FreeNow app.",
      emergency:"EU Emergency 112. Police 113. Ambulance 118. Fire Brigade 115. English-speaking doctor 06 488 2371. 24-hour vet 06 660 681.",
      eat:"Da Teo on Piazza dei Ponziani. La Scala on Piazza della Scala. Da Carlone on Piazza Sant'Apollonia. Osteria Fernanda. Osteria der Belli. Tonnarello. La Tavernaccia. Nannarella.",
      drink:"VinAllegro for aperitivo. Freni e Frizioni for cocktails. Bar San Calisto. La Vite on Piazza San Cosimato.",
      shop:"Mercato di San Cosimato. Antica Norcineria Iacozzilli. Valzani. Le Levain. Porta Portese on Sundays. Twice Vintage. Carlo Cecchini Leather.",
      visit:"Santa Maria in Trastevere. Santa Cecilia. Museo di Roma in Trastevere. Orto Botanico. Villa Farnesina. Walk across Ponte Sisto, Campo de' Fiori and Piazza Navona.",
      experiences:"Scenic tour through Via della Scala, Santa Maria in Trastevere, Santa Cecilia, Gianicolo and Orto Botanico. Evening wine at La Vite or San Calisto. Pastries at Valzani. Romantic walk over Ponte Sisto.",
      daytrips:"Ostia Antica about 40 minutes. Tivoli with Villa d'Este and Villa Adriana about one hour. Castelli Romani.",
      romantic_walk:"Starting from Via della Scala 17, Santa Maria in Trastevere, Ponte Sisto at sunset, Campo de' Fiori, Piazza Navona, gelato at Fior di Luna, Biscottificio Innocenti and return.",
      checkout_note:"Before leaving: turn off lights, close windows, leave keys on the table and close the door gently.",
      host_phone:"+39 335 5245756"
    },
    intents: [
      {k:"wifi",keys:["wifi","wi-fi","internet","password","router","network"],t:a=>`<b>WI-FI</b><br>${a.wifi_note}<br><br>Network: ${a.wifi_ssid}<br>Password: ${a.wifi_password}`},
      
      {k:"check in",keys:["check in","arrival","access","intercom","doorbell","code"],t:a=>`<b>CHECK-IN</b><br>Check-in from ${a.checkin_time}.<br><br><b>Intercom:</b> ${a.intercom_note}<br><br>For assistance call ${a.host_phone}`},
      
      {k:"check out",keys:["check out","departure","leave","leaving"],t:a=>`<b>CHECK-OUT</b><br>Check-out time is ${a.checkout_time}.<br><br>${a.checkout_note}`},
      
      {k:"water",keys:["water","hot water","drinkable","tap"],t:a=>`<b>WATER</b><br>${a.water_note}`},
      
      {k:"bathroom",keys:["bathroom","hairdryer","soap","towels","amenities"],t:a=>`<b>BATHROOM</b><br>You will find: ${a.bathroom_amenities}<br><br><b>Towels:</b> ${a.towels_note}`},
      
      {k:"gas",keys:["gas","kitchen","stove","flame","burner","cook","cooking"],t:a=>`<b>GAS USE</b><br>${a.gas_steps}<br><br><b>Washing machine:</b> ${a.washer_note}`},
      
      {k:"services",keys:["services","pharmacy","hospital","atm","sim","laundry","luggage","numbers"],t:a=>`<b>USEFUL SERVICES</b><br><br><b>Pharmacy:</b> ${a.pharmacy}<br><br><b>Hospital:</b> ${a.hospital}<br><br><b>ATMs:</b> ${a.atms}<br><br><b>SIM cards:</b> ${a.sims}<br><br><b>Laundry:</b> ${a.laundry}<br><br><b>Luggage storage:</b> ${a.luggage}`},
      
      {k:"transport",keys:["transport","tram","bus","taxi","airport","train","metro","getting around"],t:a=>`<b>TRANSPORT</b><br>${a.transport}<br><br><b>Airports:</b> ${a.airports}<br><br><b>Taxi:</b> ${a.taxi}`},
      
      {k:"eat",keys:["eat","restaurant","dinner","lunch","food","where to eat"],t:a=>`<b>WHERE TO EAT</b><br>${a.eat}`},
      
      {k:"drink",keys:["drink","bar","wine","cocktail","aperitivo","coffee"],t:a=>`<b>WHERE TO DRINK</b><br>${a.drink}`},
      
      {k:"shop",keys:["shop","market","shopping","boutique"],t:a=>`<b>SHOPPING</b><br>${a.shop}`},
      
      {k:"visit",keys:["visit","see","what to see","sight","attraction","museum"],t:a=>`<b>WHAT TO VISIT</b><br>${a.visit}`},
      
      {k:"experience",keys:["experience","walk","tour","itinerary","sunset","romantic","what to do"],t:a=>`<b>RECOMMENDED EXPERIENCES</b><br>${a.experiences}<br><br><b>Romantic route:</b> ${a.romantic_walk}`},
      
      {k:"day trips",keys:["day trips","day trip","tivoli","ostia","castelli","excursion","excursions"],t:a=>`<b>DAY TRIPS</b><br>${a.daytrips}`},
      
      {k:"emergency",keys:["emergency","police","ambulance","fire","doctor","vet","help","urgent","sos"],t:a=>`<b>EMERGENCIES</b><br>${a.emergency}`},

      {
        k:"tickets & events",
        keys:["tickets & events","tickets","events","concert","concerts","match","shows","theatre"],
        t:()=>`<b>TICKETS AND EVENTS IN ROME</b><br><br>‚Ä¢ <b>TicketOne</b> - concerts, theatre, sport:<br><a href="https://www.ticketone.it/en/" target="_blank" rel="noopener noreferrer">www.ticketone.it</a><br><br>‚Ä¢ <b>AS Roma</b> - official tickets:<br><a href="https://www.asroma.com/en/tickets" target="_blank" rel="noopener noreferrer">www.asroma.com/tickets</a><br><br>‚Ä¢ <b>SS Lazio</b> - official tickets:<br><a href="https://www.sslazio.it/en" target="_blank" rel="noopener noreferrer">www.sslazio.it/tickets</a>`
      },
      {
        k:"museums & sites",
        keys:["museums & sites","museums","museum","sites","monuments","colosseum","vatican"],
        t:()=>`<b>MUSEUMS AND ARCHAEOLOGICAL SITES</b><br><br>‚Ä¢ <b>Colosseum, Roman Forum and Palatine:</b><br><a href="https://colosseo.it/en" target="_blank" rel="noopener noreferrer">www.colosseo.it</a><br><br>‚Ä¢ <b>Vatican Museums and Sistine Chapel:</b><br><a href="https://tickets.museivaticani.va/" target="_blank" rel="noopener noreferrer">tickets.museivaticani.va</a><br><br>‚Ä¢ <b>Rome Museums</b> (Capitoline, Ara Pacis, etc.):<br><a href="https://www.museiincomuneroma.it/en" target="_blank" rel="noopener noreferrer">www.museiincomuneroma.it</a>`
      },
      {
        k:"exhibitions",
        keys:["exhibitions","exhibition","art","shows","temporary"],
        t:()=>`<b>EXHIBITIONS AND ART SHOWS</b><br><br>‚Ä¢ <b>Musei in Comune</b> - temporary exhibitions:<br><a href="https://www.museiincomuneroma.it/en/exhibitions" target="_blank" rel="noopener noreferrer">www.museiincomuneroma.it/exhibitions</a><br><br>‚Ä¢ <b>Scuderie del Quirinale:</b><br><a href="https://www.scuderiequirinale.it/" target="_blank" rel="noopener noreferrer">www.scuderiequirinale.it</a><br><br>‚Ä¢ <b>MAXXI</b> - Museum of 21st Century Arts:<br><a href="https://www.maxxi.art/en/" target="_blank" rel="noopener noreferrer">www.maxxi.art</a>`
      }
    ]
  },

  it: {
    ui:{
      welcome:"Ciao, sono Samantha, la tua guida virtuale. Tocca un pulsante per una risposta rapida.",
      placeholder:"Ciao, sono Samantha, la tua guida virtuale. Tocca un pulsante ‚Äî oppure scrivi qui‚Ä¶",
      apt_label:"Appartamento", 
      voice_on:"üîä Voce: On", 
      voice_off:"üîá Voce: Off",
      quick:[
        "wifi","check in","check out","acqua","bagno","gas","mangiare","bere","shopping","visitare","esperienze","gite di un giorno",
        "biglietti & eventi","musei & siti","mostre",
        "trasporti","servizi","emergenza"
      ],
      fallback:"Non ho trovato una risposta diretta. Prova un pulsante rapido come wifi, gas, trasporti o visitare.",
      fb_label:"Ti √® stato utile?",
      fb_like:"üëç Mi piace",
      fb_dislike:"üëé Non mi piace",
      fb_thanks:"Grazie per il tuo feedback!"
    },
    apt:{
      checkin_time:"15:00", 
      checkout_time:"11:00",
      wifi_note:"Il router si trova sul lato destro del soggiorno, appoggiato su una panca. √à un dispositivo cilindrico nero. Giralo per leggere SSID e password sul retro.",
      wifi_ssid:"Vedi etichetta del router", 
      wifi_password:"Vedi etichetta del router",
      water_note:"L'acqua del rubinetto √® potabile. L'acqua calda √® sempre attiva.",
      bathroom_amenities:"Carta igienica, sapone per le mani, asciugacapelli e tappetino.",
      towels_note:"Per ogni ospite: un telo grande e uno medio. Letto pronto all'arrivo.",
      gas_steps:"Davanti al contatore del gas la leva in posizione orizzontale indica aperto, verso il basso indica chiuso. Per cucinare scegli il fuoco, premi e gira la manopola e tienila premuta per qualche secondo finch√© la fiamma √® stabile, poi rilascia.",
      washer_note:"Il manuale della lavatrice √® nel cassetto della cucina. Se non lo trovi, cerca il modello online e scarica il manuale in PDF.",
      intercom_note:"All'ingresso ci sono due colonne di citofoni. Il tuo si trova nella colonna pi√π vicina alla porta, sul lato sinistro, ed √® il primo dal basso. Dopo il primo portone, il secondo citofono corrisponde all'interno A uno.",
      pharmacy:"Farmacia Trastevere in Viale Trastevere 116. In alternativa farmacia vicino a Piazza Trilussa.",
      hospital:"Ospedale Nuovo Regina Margherita in Via Emilio Morosini 30.",
      atms:"Bancomat Intesa in Piazza Santa Maria in Trastevere e Unicredit in Viale Trastevere 108.",
      sims:"Vodafone in Viale Trastevere 143 e TIM in Piazza San Cosimato 70.",
      laundry:"Lavanderia self service in Via della Scala 51.",
      luggage:"Punti Radical Storage a Trastevere o vicino Largo Argentina con prenotazione online.",
      transport:"Tram 8 da Trastevere verso Piazza Venezia. Bus 23 e H collegano Vaticano, Piazza Venezia e Termini. Trastevere √® perfetta da girare a piedi.",
      airports:"Fiumicino: Tram 8 fino a Stazione Trastevere e poi treno FL1, circa quarantacinque minuti. Ciampino: bus Terravision o taxi. Disponibile transfer privato con Welcome Pickups.",
      taxi:"Radio Taxi 06 3570 oppure app FreeNow.",
      emergency:"Emergenze UE 112. Polizia 113. Ambulanza 118. Vigili del Fuoco 115. Medico in inglese 06 488 2371. Veterinario 24 ore 06 660 681.",
      eat:"Da Teo in Piazza dei Ponziani. La Scala in Piazza della Scala. Da Carlone in Piazza Sant'Apollonia. Osteria Fernanda. Osteria der Belli. Tonnarello. La Tavernaccia. Nannarella.",
      drink:"VinAllegro per aperitivo. Freni e Frizioni per cocktail. Bar San Calisto. La Vite in Piazza San Cosimato.",
      shop:"Mercato di San Cosimato. Antica Norcineria Iacozzilli. Valzani. Le Levain. Porta Portese la domenica. Twice Vintage. Carlo Cecchini Leather.",
      visit:"Santa Maria in Trastevere. Santa Cecilia. Museo di Roma in Trastevere. Orto Botanico. Villa Farnesina. Passeggiata Ponte Sisto, Campo de' Fiori e Piazza Navona.",
      experiences:"Giro scenico tra Via della Scala, Santa Maria in Trastevere, Santa Cecilia, Gianicolo e Orto Botanico. Vino serale a La Vite o San Calisto. Dolci da Valzani. Passeggiata romantica su Ponte Sisto.",
      daytrips:"Ostia Antica circa quaranta minuti. Tivoli con Villa d'Este e Villa Adriana circa un'ora. Castelli Romani.",
      romantic_walk:"Partenza da Via della Scala 17, Santa Maria in Trastevere, Ponte Sisto al tramonto, Campo de' Fiori, Piazza Navona, gelato da Fior di Luna, Biscottificio Innocenti e rientro.",
      checkout_note:"Prima di partire spegni le luci, chiudi le finestre, lascia le chiavi sul tavolo e chiudi delicatamente la porta.",
      host_phone:"+39 335 5245756"
    },
    intents:[
      {k:"wifi",keys:["wifi","wi-fi","internet","password","router","rete"],t:a=>`<b>WI-FI</b><br>${a.wifi_note}<br><br>Rete: ${a.wifi_ssid}<br>Password: ${a.wifi_password}`},
      
      {k:"check in",keys:["check in","arrivo","accesso","citofono","campanello","codice"],t:a=>`<b>CHECK-IN</b><br>Check-in dalle ${a.checkin_time}.<br><br><b>Citofono:</b> ${a.intercom_note}<br><br>Per assistenza chiama ${a.host_phone}`},
      
      {k:"check out",keys:["check out","partenza","lasciare","uscita"],t:a=>`<b>CHECK-OUT</b><br>Il check-out √® alle ${a.checkout_time}.<br><br>${a.checkout_note}`},
      
      {k:"acqua",keys:["acqua","acqua calda","potabile","rubinetto"],t:a=>`<b>ACQUA</b><br>${a.water_note}`},
      
      {k:"bagno",keys:["bagno","asciugacapelli","sapone","asciugamani","amenities"],t:a=>`<b>BAGNO</b><br>Troverai: ${a.bathroom_amenities}<br><br><b>Asciugamani:</b> ${a.towels_note}`},
      
      {k:"gas",keys:["gas","cucina","fornello","fiamma","bruciatore","cucinare"],t:a=>`<b>USO DEL GAS</b><br>${a.gas_steps}<br><br><b>Lavatrice:</b> ${a.washer_note}`},
      
      {k:"servizi",keys:["servizi","farmacia","ospedale","bancomat","sim","lavanderia","bagagli","numeri"],t:a=>`<b>SERVIZI UTILI</b><br><br><b>Farmacia:</b> ${a.pharmacy}<br><br><b>Ospedale:</b> ${a.hospital}<br><br><b>Bancomat:</b> ${a.atms}<br><br><b>SIM:</b> ${a.sims}<br><br><b>Lavanderia:</b> ${a.laundry}<br><br><b>Deposito bagagli:</b> ${a.luggage}`},
      
      {k:"trasporti",keys:["trasporti","tram","bus","taxi","aeroporto","treno","metro","muoversi"],t:a=>`<b>TRASPORTI</b><br>${a.transport}<br><br><b>Aeroporti:</b> ${a.airports}<br><br><b>Taxi:</b> ${a.taxi}`},
      
      {k:"mangiare",keys:["mangiare","ristorante","cena","pranzo","cibo","dove mangiare"],t:a=>`<b>DOVE MANGIARE</b><br>${a.eat}`},
      
      {k:"bere",keys:["bere","bar","vino","cocktail","aperitivo","caff√®"],t:a=>`<b>DOVE BERE</b><br>${a.drink}`},
      
      {k:"shopping",keys:["shopping","mercato","negozi","boutique"],t:a=>`<b>SHOPPING</b><br>${a.shop}`},
      
      {k:"visitare",keys:["visitare","vedere","cosa vedere","attrazioni","museo"],t:a=>`<b>COSA VISITARE</b><br>${a.visit}`},
      
      {k:"esperienze",keys:["esperienze","passeggiata","tour","itinerario","tramonto","romantico","cosa fare"],t:a=>`<b>ESPERIENZE CONSIGLIATE</b><br>${a.experiences}<br><br><b>Percorso romantico:</b> ${a.romantic_walk}`},
      
      {k:"gite di un giorno",keys:["gite","gita","tivoli","ostia","castelli","escursione","escursioni"],t:a=>`<b>GITE DI UN GIORNO</b><br>${a.daytrips}`},
      
      {k:"emergenza",keys:["emergenza","polizia","ambulanza","vigili","medico","veterinario","aiuto","urgenza","sos"],t:a=>`<b>EMERGENZE</b><br>${a.emergency}`},

      {
        k:"biglietti & eventi",
        keys:["biglietti","ticket","evento","eventi","concerto","concerti","partita","spettacoli"],
        t:()=>`<b>BIGLIETTI ED EVENTI A ROMA</b><br><br>‚Ä¢ <b>TicketOne</b> - concerti, teatro, sport:<br><a href="https://www.ticketone.it/en/" target="_blank" rel="noopener noreferrer">www.ticketone.it</a><br><br>‚Ä¢ <b>AS Roma</b> - biglietti ufficiali:<br><a href="https://www.asroma.com/en/tickets" target="_blank" rel="noopener noreferrer">www.asroma.com/tickets</a><br><br>‚Ä¢ <b>SS Lazio</b> - biglietti ufficiali:<br><a href="https://www.sslazio.it/en" target="_blank" rel="noopener noreferrer">www.sslazio.it/tickets</a>`
      },
      {
        k:"musei & siti",
        keys:["museo","musei","sito","siti","monumenti","colosseo","vaticano"],
        t:()=>`<b>MUSEI E SITI ARCHEOLOGICI</b><br><br>‚Ä¢ <b>Colosseo, Foro Romano e Palatino:</b><br><a href="https://colosseo.it/en" target="_blank" rel="noopener noreferrer">www.colosseo.it</a><br><br>‚Ä¢ <b>Musei Vaticani e Cappella Sistina:</b><br><a href="https://tickets.museivaticani.va/" target="_blank" rel="noopener noreferrer">tickets.museivaticani.va</a><br><br>‚Ä¢ <b>Musei di Roma Capitale</b> (Capitolini, Ara Pacis, ecc.):<br><a href="https://www.museiincomuneroma.it/en" target="_blank" rel="noopener noreferrer">www.museiincomuneroma.it</a>`
      },
      {
        k:"mostre",
        keys:["mostre","mostra","esposizioni","arte","temporanee"],
        t:()=>`<b>MOSTRE ED ESPOSIZIONI</b><br><br>‚Ä¢ <b>Musei in Comune</b> - mostre temporanee:<br><a href="https://www.museiincomuneroma.it/en/exhibitions" target="_blank" rel="noopener noreferrer">www.museiincomuneroma.it/exhibitions</a><br><br>‚Ä¢ <b>Scuderie del Quirinale:</b><br><a href="https://www.scuderiequirinale.it/" target="_blank" rel="noopener noreferrer">www.scuderiequirinale.it</a><br><br>‚Ä¢ <b>MAXXI</b> - Museo delle Arti del XXI secolo:<br><a href="https://www.maxxi.art/en/" target="_blank" rel="noopener noreferrer">www.maxxi.art</a>`
      }
    ]
  },
fr: {
    ui:{
      welcome:"Bonjour, je suis Samantha, votre guide virtuel. Touchez un bouton pour une r√©ponse rapide.",
      placeholder:"Bonjour, je suis Samantha, votre guide virtuel. Touchez un bouton ‚Äî ou √©crivez ici‚Ä¶",
      apt_label:"Appartement", 
      voice_on:"üîä Voix : Activ√©e", 
      voice_off:"üîá Voix : D√©sactiv√©e",
      quick:[
        "wifi","check in","check out","eau","salle de bain","gaz","manger","boire","shopping","visiter","exp√©riences","excursions",
        "billets & √©v√©nements","mus√©es & sites","expositions",
        "transports","services","urgence"
      ],
      fallback:"Je n'ai pas trouv√© de r√©ponse directe. Essayez un bouton rapide comme wifi, gaz, transports ou visiter.",
      fb_label:"Cette r√©ponse vous a-t-elle aid√©¬∑e ?",
      fb_like:"üëç J'aime",
      fb_dislike:"üëé Je n'aime pas",
      fb_thanks:"Merci pour votre retour !"
    },
    apt:{
      checkin_time:"15:00", 
      checkout_time:"11:00",
      wifi_note:"Le routeur se trouve sur le c√¥t√© droit du salon, pos√© sur un banc. C'est un appareil cylindrique noir. Tournez-le pour lire le SSID et le mot de passe au dos.",
      wifi_ssid:"Voir l'√©tiquette du routeur", 
      wifi_password:"Voir l'√©tiquette du routeur",
      water_note:"L'eau du robinet est potable. L'eau chaude est toujours disponible.",
      bathroom_amenities:"Papier toilette, savon pour les mains, s√®che-cheveux et tapis de bain.",
      towels_note:"Par personne : une grande et une moyenne serviette. Lit pr√™t √† l'arriv√©e.",
      gas_steps:"Face au compteur de gaz : levier en acier horizontal = OUVERT, vers le bas = FERM√â. Pour cuisiner : choisissez le br√ªleur, appuyez et tournez le bouton, maintenez-le enfonc√© quelques secondes jusqu'√† ce que la flamme soit stable, puis rel√¢chez.",
      washer_note:"Le manuel de la machine √† laver est dans le tiroir de la cuisine. Si vous ne le trouvez pas, cherchez le mod√®le en ligne et t√©l√©chargez le manuel PDF.",
      intercom_note:"√Ä l'entr√©e, il y a deux colonnes d'interphones. Le v√¥tre se trouve dans la colonne la plus proche de la porte, sur le c√¥t√© gauche, le premier en partant du bas. Apr√®s la premi√®re porte, le deuxi√®me interphone correspond √† l'unit√© A/1.",
      pharmacy:"Farmacia Trastevere sur Viale Trastevere 116. Alternative : pharmacie pr√®s de Piazza Trilussa.",
      hospital:"Ospedale Nuovo Regina Margherita sur Via Emilio Morosini 30.",
      atms:"Distributeur Intesa √† Piazza Santa Maria in Trastevere et Unicredit sur Viale Trastevere 108.",
      sims:"Vodafone sur Viale Trastevere 143 et TIM sur Piazza San Cosimato 70.",
      laundry:"Laverie en libre-service sur Via della Scala 51.",
      luggage:"Points Radical Storage √† Trastevere ou pr√®s de Largo Argentina avec r√©servation en ligne.",
      transport:"Tram 8 depuis Trastevere vers Piazza Venezia. Bus 23 et H relient le Vatican, Piazza Venezia et Termini. Trastevere est parfait pour marcher.",
      airports:"Fiumicino : Tram 8 jusqu'√† la gare de Trastevere puis train FL1, environ 45 minutes. Ciampino : bus Terravision ou taxi. Transfert priv√© disponible avec Welcome Pickups.",
      taxi:"Radio Taxi 06 3570 ou application FreeNow.",
      emergency:"Urgences UE 112. Police 113. Ambulance 118. Pompiers 115. M√©decin anglophone 06 488 2371. V√©t√©rinaire 24 heures 06 660 681.",
      eat:"Da Teo √† Piazza dei Ponziani. La Scala √† Piazza della Scala. Da Carlone √† Piazza Sant'Apollonia. Osteria Fernanda. Osteria der Belli. Tonnarello. La Tavernaccia. Nannarella.",
      drink:"VinAllegro pour l'ap√©ritif. Freni e Frizioni pour les cocktails. Bar San Calisto. La Vite √† Piazza San Cosimato.",
      shop:"Mercato di San Cosimato. Antica Norcineria Iacozzilli. Valzani. Le Levain. Porta Portese le dimanche. Twice Vintage. Carlo Cecchini Leather.",
      visit:"Santa Maria in Trastevere. Santa Cecilia. Museo di Roma in Trastevere. Orto Botanico. Villa Farnesina. Promenade Ponte Sisto, Campo de' Fiori et Piazza Navona.",
      experiences:"Circuit panoramique entre Via della Scala, Santa Maria in Trastevere, Santa Cecilia, Gianicolo et Orto Botanico. Vin en soir√©e √† La Vite ou San Calisto. P√¢tisseries chez Valzani. Promenade romantique sur Ponte Sisto.",
      daytrips:"Ostia Antica environ 40 minutes. Tivoli avec Villa d'Este et Villa Adriana environ une heure. Castelli Romani.",
      romantic_walk:"D√©part de Via della Scala 17, Santa Maria in Trastevere, Ponte Sisto au coucher du soleil, Campo de' Fiori, Piazza Navona, gelato chez Fior di Luna, Biscottificio Innocenti et retour.",
      checkout_note:"Avant de partir : √©teignez les lumi√®res, fermez les fen√™tres, laissez les cl√©s sur la table et fermez doucement la porte.",
      host_phone:"+39 335 5245756"
    },
    intents:[
      {k:"wifi",keys:["wifi","wi-fi","internet","mot de passe","routeur","r√©seau"],t:a=>`<b>WI-FI</b><br>${a.wifi_note}<br><br>R√©seau : ${a.wifi_ssid}<br>Mot de passe : ${a.wifi_password}`},
      
      {k:"check in",keys:["check in","arriv√©e","acc√®s","interphone","sonnette","code"],t:a=>`<b>CHECK-IN</b><br>Check-in √† partir de ${a.checkin_time}.<br><br><b>Interphone :</b> ${a.intercom_note}<br><br>Pour assistance appelez ${a.host_phone}`},
      
      {k:"check out",keys:["check out","d√©part","quitter","sortie"],t:a=>`<b>CHECK-OUT</b><br>Le check-out est √† ${a.checkout_time}.<br><br>${a.checkout_note}`},
      
      {k:"eau",keys:["eau","chaude","potable","robinet"],t:a=>`<b>EAU</b><br>${a.water_note}`},
      
      {k:"salle de bain",keys:["salle de bain","s√®che-cheveux","savon","serviettes"],t:a=>`<b>SALLE DE BAIN</b><br>Vous trouverez : ${a.bathroom_amenities}<br><br><b>Serviettes :</b> ${a.towels_note}`},
      
      {k:"gaz",keys:["gaz","cuisine","cuisini√®re","flamme","br√ªleur","cuisiner"],t:a=>`<b>UTILISATION DU GAZ</b><br>${a.gas_steps}<br><br><b>Machine √† laver :</b> ${a.washer_note}`},
      
      {k:"services",keys:["services","pharmacie","h√¥pital","dab","sim","laverie","consigne","num√©ros"],t:a=>`<b>SERVICES UTILES</b><br><br><b>Pharmacie :</b> ${a.pharmacy}<br><br><b>H√¥pital :</b> ${a.hospital}<br><br><b>Distributeurs :</b> ${a.atms}<br><br><b>Cartes SIM :</b> ${a.sims}<br><br><b>Laverie :</b> ${a.laundry}<br><br><b>Consigne √† bagages :</b> ${a.luggage}`},
      
      {k:"transports",keys:["transports","tram","bus","taxi","a√©roport","train","m√©tro","se d√©placer"],t:a=>`<b>TRANSPORTS</b><br>${a.transport}<br><br><b>A√©roports :</b> ${a.airports}<br><br><b>Taxi :</b> ${a.taxi}`},
      
      {k:"manger",keys:["manger","restaurant","d√Æner","d√©jeuner","nourriture","o√π manger"],t:a=>`<b>O√ô MANGER</b><br>${a.eat}`},
      
      {k:"boire",keys:["boire","bar","vin","cocktail","ap√©ritif","caf√©"],t:a=>`<b>O√ô BOIRE</b><br>${a.drink}`},
      
      {k:"shopping",keys:["shopping","march√©","boutiques","magasins"],t:a=>`<b>SHOPPING</b><br>${a.shop}`},
      
      {k:"visiter",keys:["visiter","voir","quoi voir","attractions","mus√©e"],t:a=>`<b>QUOI VISITER</b><br>${a.visit}`},
      
      {k:"exp√©riences",keys:["exp√©riences","promenade","tour","itin√©raire","coucher de soleil","romantique","quoi faire"],t:a=>`<b>EXP√âRIENCES RECOMMAND√âES</b><br>${a.experiences}<br><br><b>Parcours romantique :</b> ${a.romantic_walk}`},
      
      {k:"excursions",keys:["excursions","excursion","tivoli","ostia","castelli","sortie"],t:a=>`<b>EXCURSIONS D'UNE JOURN√âE</b><br>${a.daytrips}`},
      
      {k:"urgence",keys:["urgence","police","ambulance","pompiers","m√©decin","v√©t√©rinaire","aide","urgent","sos"],t:a=>`<b>URGENCES</b><br>${a.emergency}`},

      {
        k:"billets & √©v√©nements",
        keys:["billets","ticket","√©v√©nement","√©v√©nements","concert","concerts","match","spectacles"],
        t:()=>`<b>BILLETS ET √âV√âNEMENTS √Ä ROME</b><br><br>‚Ä¢ <b>TicketOne</b> - concerts, th√©√¢tre, sport :<br><a href="https://www.ticketone.it/en/" target="_blank" rel="noopener noreferrer">www.ticketone.it</a><br><br>‚Ä¢ <b>AS Roma</b> - billets officiels :<br><a href="https://www.asroma.com/en/tickets" target="_blank" rel="noopener noreferrer">www.asroma.com/tickets</a><br><br>‚Ä¢ <b>SS Lazio</b> - billets officiels :<br><a href="https://www.sslazio.it/en" target="_blank" rel="noopener noreferrer">www.sslazio.it/tickets</a>`
      },
      {
        k:"mus√©es & sites",
        keys:["mus√©e","mus√©es","site","sites","monuments","colis√©e","vatican"],
        t:()=>`<b>MUS√âES ET SITES ARCH√âOLOGIQUES</b><br><br>‚Ä¢ <b>Colis√©e, Forum Romain et Palatin :</b><br><a href="https://colosseo.it/en" target="_blank" rel="noopener noreferrer">www.colosseo.it</a><br><br>‚Ä¢ <b>Mus√©es du Vatican et Chapelle Sixtine :</b><br><a href="https://tickets.museivaticani.va/" target="_blank" rel="noopener noreferrer">tickets.museivaticani.va</a><br><br>‚Ä¢ <b>Mus√©es de Rome</b> (Capitolins, Ara Pacis, etc.) :<br><a href="https://www.museiincomuneroma.it/en" target="_blank" rel="noopener noreferrer">www.museiincomuneroma.it</a>`
      },
      {
        k:"expositions",
        keys:["exposition","expositions","art","shows","temporaires"],
        t:()=>`<b>EXPOSITIONS ET SHOWS D'ART</b><br><br>‚Ä¢ <b>Musei in Comune</b> - expositions temporaires :<br><a href="https://www.museiincomuneroma.it/en/exhibitions" target="_blank" rel="noopener noreferrer">www.museiincomuneroma.it/exhibitions</a><br><br>‚Ä¢ <b>Scuderie del Quirinale :</b><br><a href="https://www.scuderiequirinale.it/" target="_blank" rel="noopener noreferrer">www.scuderiequirinale.it</a><br><br>‚Ä¢ <b>MAXXI</b> - Mus√©e des Arts du XXIe si√®cle :<br><a href="https://www.maxxi.art/en/" target="_blank" rel="noopener noreferrer">www.maxxi.art</a>`
      }
    ]
  },

  de: {
    ui:{
      welcome:"Hallo, ich bin Samantha, dein virtueller Guide. Tippe auf einen Button f√ºr eine schnelle Antwort.",
      placeholder:"Hallo, ich bin Samantha, dein virtueller Guide. Tippe auf einen Button ‚Äî oder schreibe hier‚Ä¶",
      apt_label:"Apartment", 
      voice_on:"üîä Stimme: An", 
      voice_off:"üîá Stimme: Aus",
      quick:[
        "WLAN","check in","check out","Wasser","Bad","Gas","Essen","Trinken","Shopping","Sehensw√ºrdigkeiten","Erlebnisse","Tagesausfl√ºge",
        "Tickets & Events","Museen & Sites","Ausstellungen",
        "Verkehr","Services","Notfall"
      ],
      fallback:"Keine direkte Antwort gefunden. Nutze einen schnellen Button wie WLAN, Gas, Verkehr oder Sehensw√ºrdigkeiten.",
      fb_label:"War diese Antwort hilfreich?",
      fb_like:"üëç Like",
      fb_dislike:"üëé Dislike",
      fb_thanks:"Danke f√ºr dein Feedback!"
    },
    apt:{
      checkin_time:"15:00", 
      checkout_time:"11:00",
      wifi_note:"Der Router befindet sich auf der rechten Seite des Wohnzimmers, auf einer Bank. Es ist ein schwarzes zylindrisches Ger√§t. Drehe es um, um SSID und Passwort auf der R√ºckseite zu lesen.",
      wifi_ssid:"Siehe Router-Etikett", 
      wifi_password:"Siehe Router-Etikett",
      water_note:"Leitungswasser ist trinkbar. Warmwasser ist immer verf√ºgbar.",
      bathroom_amenities:"Toilettenpapier, Handseife, F√∂hn und Badematte.",
      towels_note:"Pro Gast: ein gro√ües und ein mittleres Handtuch. Bett bei Ankunft gemacht.",
      gas_steps:"Vor dem Gasz√§hler: Stahlhebel horizontal = OFFEN, nach unten zeigend = GESCHLOSSEN. Zum Kochen: W√§hle den Brenner, dr√ºcke und drehe den Knopf, halte ihn einige Sekunden gedr√ºckt, bis die Flamme stabil ist, dann loslassen.",
      washer_note:"Die Bedienungsanleitung der Waschmaschine befindet sich in der K√ºchenschublade. Wenn du sie nicht findest, suche das Modell online und lade das PDF-Handbuch herunter.",
      intercom_note:"Am Eingang gibt es zwei Sprechanlagen-Spalten. Deine Einheit befindet sich in der Spalte, die der T√ºr am n√§chsten ist, auf der linken Seite, die erste von unten. Nach der ersten T√ºr entspricht die zweite Sprechanlage der Einheit A/1.",
      pharmacy:"Farmacia Trastevere auf Viale Trastevere 116. Alternativ Apotheke in der N√§he von Piazza Trilussa.",
      hospital:"Ospedale Nuovo Regina Margherita auf Via Emilio Morosini 30.",
      atms:"Intesa-Geldautomat auf Piazza Santa Maria in Trastevere und Unicredit auf Viale Trastevere 108.",
      sims:"Vodafone auf Viale Trastevere 143 und TIM auf Piazza San Cosimato 70.",
      laundry:"Selbstbedienungs-Waschsalon auf Via della Scala 51.",
      luggage:"Radical Storage Punkte in Trastevere oder in der N√§he von Largo Argentina mit Online-Buchung.",
      transport:"Stra√üenbahn 8 von Trastevere Richtung Piazza Venezia. Busse 23 und H verbinden Vatikan, Piazza Venezia und Termini. Trastevere ist perfekt zum Laufen.",
      airports:"Fiumicino: Stra√üenbahn 8 zum Bahnhof Trastevere dann Zug FL1, etwa 45 Minuten. Ciampino: Terravision-Bus oder Taxi. Privattransfer verf√ºgbar mit Welcome Pickups.",
      taxi:"Radio Taxi 06 3570 oder FreeNow-App.",
      emergency:"EU-Notruf 112. Polizei 113. Rettungsdienst 118. Feuerwehr 115. Englischsprachiger Arzt 06 488 2371. 24-Stunden-Tierarzt 06 660 681.",
      eat:"Da Teo auf Piazza dei Ponziani. La Scala auf Piazza della Scala. Da Carlone auf Piazza Sant'Apollonia. Osteria Fernanda. Osteria der Belli. Tonnarello. La Tavernaccia. Nannarella.",
      drink:"VinAllegro f√ºr Aperitif. Freni e Frizioni f√ºr Cocktails. Bar San Calisto. La Vite auf Piazza San Cosimato.",
      shop:"Mercato di San Cosimato. Antica Norcineria Iacozzilli. Valzani. Le Levain. Porta Portese sonntags. Twice Vintage. Carlo Cecchini Leather.",
      visit:"Santa Maria in Trastevere. Santa Cecilia. Museo di Roma in Trastevere. Orto Botanico. Villa Farnesina. Spaziergang √ºber Ponte Sisto, Campo de' Fiori und Piazza Navona.",
      experiences:"Malerische Tour durch Via della Scala, Santa Maria in Trastevere, Santa Cecilia, Gianicolo und Orto Botanico. Abendwein bei La Vite oder San Calisto. Geb√§ck bei Valzani. Romantischer Spaziergang √ºber Ponte Sisto.",
      daytrips:"Ostia Antica etwa 40 Minuten. Tivoli mit Villa d'Este und Villa Adriana etwa eine Stunde. Castelli Romani.",
      romantic_walk:"Start von Via della Scala 17, Santa Maria in Trastevere, Ponte Sisto bei Sonnenuntergang, Campo de' Fiori, Piazza Navona, Gelato bei Fior di Luna, Biscottificio Innocenti und R√ºckkehr.",
      checkout_note:"Vor der Abreise: Schalten Sie die Lichter aus, schlie√üen Sie die Fenster, lassen Sie die Schl√ºssel auf dem Tisch und schlie√üen Sie die T√ºr sanft.",
      host_phone:"+39 335 5245756"
    },
    intents:[
      {k:"WLAN",keys:["wlan","wifi","wi-fi","internet","passwort","router","netzwerk"],t:a=>`<b>WLAN</b><br>${a.wifi_note}<br><br>Netzwerk: ${a.wifi_ssid}<br>Passwort: ${a.wifi_password}`},
      
      {k:"check in",keys:["check in","ankunft","zugang","sprechanlage","klingel","code"],t:a=>`<b>CHECK-IN</b><br>Check-in ab ${a.checkin_time}.<br><br><b>Sprechanlage:</b> ${a.intercom_note}<br><br>F√ºr Hilfe rufen Sie ${a.host_phone} an`},
      
      {k:"check out",keys:["check out","abreise","verlassen","ausgang"],t:a=>`<b>CHECK-OUT</b><br>Der Check-out ist um ${a.checkout_time}.<br><br>${a.checkout_note}`},
      
      {k:"Wasser",keys:["wasser","warmwasser","trinkbar","hahn"],t:a=>`<b>WASSER</b><br>${a.water_note}`},
      
      {k:"Bad",keys:["bad","f√∂hn","seife","handt√ºcher"],t:a=>`<b>BADEZIMMER</b><br>Sie finden: ${a.bathroom_amenities}<br><br><b>Handt√ºcher:</b> ${a.towels_note}`},
      
      {k:"Gas",keys:["gas","k√ºche","herd","flamme","brenner","kochen"],t:a=>`<b>GASVERWENDUNG</b><br>${a.gas_steps}<br><br><b>Waschmaschine:</b> ${a.washer_note}`},
      
      {k:"Services",keys:["services","apotheke","krankenhaus","geldautomat","sim","w√§scherei","gep√§ck","nummern"],t:a=>`<b>N√úTZLICHE SERVICES</b><br><br><b>Apotheke:</b> ${a.pharmacy}<br><br><b>Krankenhaus:</b> ${a.hospital}<br><br><b>Geldautomaten:</b> ${a.atms}<br><br><b>SIM-Karten:</b> ${a.sims}<br><br><b>Waschsalon:</b> ${a.laundry}<br><br><b>Gep√§ckaufbewahrung:</b> ${a.luggage}`},
      
      {k:"Verkehr",keys:["verkehr","stra√üenbahn","bus","taxi","flughafen","zug","metro","fortbewegen"],t:a=>`<b>VERKEHR</b><br>${a.transport}<br><br><b>Flugh√§fen:</b> ${a.airports}<br><br><b>Taxi:</b> ${a.taxi}`},
      
      {k:"Essen",keys:["essen","restaurant","abendessen","mittagessen","nahrung","wo essen"],t:a=>`<b>WO ESSEN</b><br>${a.eat}`},
      
      {k:"Trinken",keys:["trinken","bar","wein","cocktail","aperitif","kaffee"],t:a=>`<b>WO TRINKEN</b><br>${a.drink}`},
      
      {k:"Shopping",keys:["shopping","markt","gesch√§fte","boutique"],t:a=>`<b>SHOPPING</b><br>${a.shop}`},
      
      {k:"Sehensw√ºrdigkeiten",keys:["sehensw√ºrdigkeiten","sehen","was sehen","attraktionen","museum"],t:a=>`<b>WAS BESICHTIGEN</b><br>${a.visit}`},
      
      {k:"Erlebnisse",keys:["erlebnisse","spaziergang","tour","route","sonnenuntergang","romantisch","was tun"],t:a=>`<b>EMPFOHLENE ERLEBNISSE</b><br>${a.experiences}<br><br><b>Romantische Route:</b> ${a.romantic_walk}`},
      
      {k:"Tagesausfl√ºge",keys:["tagesausfl√ºge","tagesausflug","tivoli","ostia","castelli","ausflug"],t:a=>`<b>TAGESAUSFL√úGE</b><br>${a.daytrips}`},
      
      {k:"Notfall",keys:["notfall","polizei","rettungsdienst","feuerwehr","arzt","tierarzt","hilfe","dringend","sos"],t:a=>`<b>NOTF√ÑLLE</b><br>${a.emergency}`},

      {
        k:"Tickets & Events",
        keys:["tickets","events","eintrittskarten","konzert","konzerte","spiel","shows"],
        t:()=>`<b>TICKETS UND VERANSTALTUNGEN IN ROM</b><br><br>‚Ä¢ <b>TicketOne</b> - Konzerte, Theater, Sport:<br><a href="https://www.ticketone.it/en/" target="_blank" rel="noopener noreferrer">www.ticketone.it</a><br><br>‚Ä¢ <b>AS Roma</b> - offizielle Tickets:<br><a href="https://www.asroma.com/en/tickets" target="_blank" rel="noopener noreferrer">www.asroma.com/tickets</a><br><br>‚Ä¢ <b>SS Lazio</b> - offizielle Tickets:<br><a href="https://www.sslazio.it/en" target="_blank" rel="noopener noreferrer">www.sslazio.it/tickets</a>`
      },
      {
        k:"Museen & Sites",
        keys:["museum","museen","site","sites","denkm√§ler","kolosseum","vatikan"],
        t:()=>`<b>MUSEEN UND ARCH√ÑOLOGISCHE ST√ÑTTEN</b><br><br>‚Ä¢ <b>Kolosseum, Forum Romanum und Palatin:</b><br><a href="https://colosseo.it/en" target="_blank" rel="noopener noreferrer">www.colosseo.it</a><br><br>‚Ä¢ <b>Vatikanische Museen und Sixtinische Kapelle:</b><br><a href="https://tickets.museivaticani.va/" target="_blank" rel="noopener noreferrer">tickets.museivaticani.va</a><br><br>‚Ä¢ <b>Museen von Rom</b> (Kapitolinische, Ara Pacis, usw.):<br><a href="https://www.museiincomuneroma.it/en" target="_blank" rel="noopener noreferrer">www.museiincomuneroma.it</a>`
      },
      {
        k:"Ausstellungen",
        keys:["ausstellung","ausstellungen","kunst","shows","tempor√§r"],
        t:()=>`<b>AUSSTELLUNGEN UND KUNSTSHOWS</b><br><br>‚Ä¢ <b>Musei in Comune</b> - tempor√§re Ausstellungen:<br><a href="https://www.museiincomuneroma.it/en/exhibitions" target="_blank" rel="noopener noreferrer">www.museiincomuneroma.it/exhibitions</a><br><br>‚Ä¢ <b>Scuderie del Quirinale:</b><br><a href="https://www.scuderiequirinale.it/" target="_blank" rel="noopener noreferrer">www.scuderiequirinale.it</a><br><br>‚Ä¢ <b>MAXXI</b> - Museum f√ºr Kunst des 21. Jahrhunderts:<br><a href="https://www.maxxi.art/en/" target="_blank" rel="noopener noreferrer">www.maxxi.art</a>`
      }
    ]
  },

  es: {
    ui:{
      welcome:"Hola, soy Samantha, tu gu√≠a virtual. Toca un bot√≥n para una respuesta r√°pida.",
      placeholder:"Hola, soy Samantha, tu gu√≠a virtual. Toca un bot√≥n ‚Äî o escribe aqu√≠‚Ä¶",
      apt_label:"Apartamento", 
      voice_on:"üîä Voz: Activada", 
      voice_off:"üîá Voz: Desactivada",
      quick:[
        "wifi","check in","check out","agua","ba√±o","gas","comer","beber","compras","visitar","experiencias","excursiones",
        "entradas y eventos","museos y sitios","exposiciones",
        "transporte","servicios","emergencia"
      ],
      fallback:"No encontr√© una respuesta directa. Prueba un bot√≥n r√°pido como wifi, gas, transporte o visitar.",
      fb_label:"¬øTe result√≥ √∫til?",
      fb_like:"üëç Me gusta",
      fb_dislike:"üëé No me gusta",
      fb_thanks:"¬°Gracias por tu opini√≥n!"
    },
    apt:{
      checkin_time:"15:00", 
      checkout_time:"11:00",
      wifi_note:"El router est√° en el lado derecho del sal√≥n, sobre un banco. Es un dispositivo cil√≠ndrico negro. G√≠ralo para leer el SSID y la contrase√±a en la parte posterior.",
      wifi_ssid:"Ver etiqueta del router", 
      wifi_password:"Ver etiqueta del router",
      water_note:"El agua del grifo es potable. El agua caliente est√° siempre disponible.",
      bathroom_amenities:"Papel higi√©nico, jab√≥n de manos, secador de pelo y alfombrilla de ba√±o.",
      towels_note:"Por hu√©sped: una toalla grande y una mediana. Cama preparada a la llegada.",
      gas_steps:"Frente al contador de gas: palanca de acero horizontal = ABIERTO, apuntando hacia abajo = CERRADO. Para cocinar: elige el quemador, presiona y gira la perilla, mantenla presionada unos segundos hasta que la llama sea estable, luego suelta.",
      washer_note:"El manual de la lavadora est√° en el caj√≥n de la cocina. Si no lo encuentras, busca el modelo en l√≠nea y descarga el manual PDF.",
      intercom_note:"En la entrada hay dos columnas de porteros. El tuyo est√° en la columna m√°s cercana a la puerta, en el lado izquierdo, el primero desde abajo. Despu√©s de la primera puerta, el segundo portero corresponde a la unidad A/1.",
      pharmacy:"Farmacia Trastevere en Viale Trastevere 116. Alternativa: farmacia cerca de Piazza Trilussa.",
      hospital:"Ospedale Nuovo Regina Margherita en Via Emilio Morosini 30.",
      atms:"Cajero Intesa en Piazza Santa Maria in Trastevere y Unicredit en Viale Trastevere 108.",
      sims:"Vodafone en Viale Trastevere 143 y TIM en Piazza San Cosimato 70.",
      laundry:"Lavander√≠a autoservicio en Via della Scala 51.",
      luggage:"Puntos Radical Storage en Trastevere o cerca de Largo Argentina con reserva online.",
      transport:"Tranv√≠a 8 desde Trastevere hacia Piazza Venezia. Autobuses 23 y H conectan Vaticano, Piazza Venezia y Termini. Trastevere es perfecto para caminar.",
      airports:"Fiumicino: Tranv√≠a 8 hasta Estaci√≥n Trastevere luego tren FL1, unos 45 minutos. Ciampino: autob√∫s Terravision o taxi. Transfer privado disponible con Welcome Pickups.",
      taxi:"Radio Taxi 06 3570 o app FreeNow.",
      emergency:"Emergencia UE 112. Polic√≠a 113. Ambulancia 118. Bomberos 115. M√©dico que habla ingl√©s 06 488 2371. Veterinario 24 horas 06 660 681.",
      eat:"Da Teo en Piazza dei Ponziani. La Scala en Piazza della Scala. Da Carlone en Piazza Sant'Apollonia. Osteria Fernanda. Osteria der Belli. Tonnarello. La Tavernaccia. Nannarella.",
      drink:"VinAllegro para aperitivo. Freni e Frizioni para c√≥cteles. Bar San Calisto. La Vite en Piazza San Cosimato.",
      shop:"Mercato di San Cosimato. Antica Norcineria Iacozzilli. Valzani. Le Levain. Porta Portese los domingos. Twice Vintage. Carlo Cecchini Leather.",
      visit:"Santa Maria in Trastevere. Santa Cecilia. Museo di Roma in Trastevere. Orto Botanico. Villa Farnesina. Paseo por Ponte Sisto, Campo de' Fiori y Piazza Navona.",
      experiences:"Tour panor√°mico entre Via della Scala, Santa Maria in Trastevere, Santa Cecilia, Gianicolo y Orto Botanico. Vino al atardecer en La Vite o San Calisto. Dulces en Valzani. Paseo rom√°ntico por Ponte Sisto.",
      daytrips:"Ostia Antica unos 40 minutos. Tivoli con Villa d'Este y Villa Adriana aproximadamente una hora. Castelli Romani.",
      romantic_walk:"Salida desde Via della Scala 17, Santa Maria in Trastevere, Ponte Sisto al atardecer, Campo de' Fiori, Piazza Navona, helado en Fior di Luna, Biscottificio Innocenti y regreso.",
      checkout_note:"Antes de salir: apaga las luces, cierra las ventanas, deja las llaves en la mesa y cierra la puerta suavemente.",
      host_phone:"+39 335 5245756"
    },
    intents:[
      {k:"wifi",keys:["wifi","wi-fi","internet","contrase√±a","router","red"],t:a=>`<b>WI-FI</b><br>${a.wifi_note}<br><br>Red: ${a.wifi_ssid}<br>Contrase√±a: ${a.wifi_password}`},
      
      {k:"check in",keys:["check in","llegada","acceso","portero","timbre","c√≥digo"],t:a=>`<b>CHECK-IN</b><br>Check-in desde las ${a.checkin_time}.<br><br><b>Portero:</b> ${a.intercom_note}<br><br>Para asistencia llama al ${a.host_phone}`},
      
      {k:"check out",keys:["check out","salida","irse","marchar"],t:a=>`<b>CHECK-OUT</b><br>El check-out es a las ${a.checkout_time}.<br><br>${a.checkout_note}`},
      
      {k:"agua",keys:["agua","caliente","potable","grifo"],t:a=>`<b>AGUA</b><br>${a.water_note}`},
      
      {k:"ba√±o",keys:["ba√±o","secador","jab√≥n","toallas"],t:a=>`<b>BA√ëO</b><br>Encontrar√°s: ${a.bathroom_amenities}<br><br><b>Toallas:</b> ${a.towels_note}`},
      
      {k:"gas",keys:["gas","cocina","hornilla","llama","quemador","cocinar"],t:a=>`<b>USO DEL GAS</b><br>${a.gas_steps}<br><br><b>Lavadora:</b> ${a.washer_note}`},
      
      {k:"servicios",keys:["servicios","farmacia","hospital","cajero","sim","lavander√≠a","equipaje","n√∫meros"],t:a=>`<b>SERVICIOS √öTILES</b><br><br><b>Farmacia:</b> ${a.pharmacy}<br><br><b>Hospital:</b> ${a.hospital}<br><br><b>Cajeros:</b> ${a.atms}<br><br><b>Tarjetas SIM:</b> ${a.sims}<br><br><b>Lavander√≠a:</b> ${a.laundry}<br><br><b>Consigna de equipaje:</b> ${a.luggage}`},
      
      {k:"transporte",keys:["transporte","tranv√≠a","autob√∫s","taxi","aeropuerto","tren","metro","moverse"],t:a=>`<b>TRANSPORTE</b><br>${a.transport}<br><br><b>Aeropuertos:</b> ${a.airports}<br><br><b>Taxi:</b> ${a.taxi}`},
      
      {k:"comer",keys:["comer","restaurante","cena","almuerzo","comida","d√≥nde comer"],t:a=>`<b>D√ìNDE COMER</b><br>${a.eat}`},
      
      {k:"beber",keys:["beber","bar","vino","c√≥ctel","aperitivo","caf√©"],t:a=>`<b>D√ìNDE BEBER</b><br>${a.drink}`},
      
      {k:"compras",keys:["compras","mercado","tiendas","boutique"],t:a=>`<b>COMPRAS</b><br>${a.shop}`},
      
      {k:"visitar",keys:["visitar","ver","qu√© ver","atracciones","museo"],t:a=>`<b>QU√â VISITAR</b><br>${a.visit}`},
      
      {k:"experiencias",keys:["experiencias","paseo","tour","itinerario","atardecer","rom√°ntico","qu√© hacer"],t:a=>`<b>EXPERIENCIAS RECOMENDADAS</b><br>${a.experiences}<br><br><b>Ruta rom√°ntica:</b> ${a.romantic_walk}`},
      
      {k:"excursiones",keys:["excursiones","excursi√≥n","tivoli","ostia","castelli","salida"],t:a=>`<b>EXCURSIONES DE UN D√çA</b><br>${a.daytrips}`},
      
      {k:"emergencia",keys:["emergencia","polic√≠a","ambulancia","bomberos","m√©dico","veterinario","ayuda","urgente","sos"],t:a=>`<b>EMERGENCIAS</b><br>${a.emergency}`},

      {
        k:"entradas y eventos",
        keys:["entradas","tickets","evento","eventos","concierto","conciertos","partido","espect√°culos"],
        t:()=>`<b>ENTRADAS Y EVENTOS EN ROMA</b><br><br>‚Ä¢ <b>TicketOne</b> - conciertos, teatro, deporte:<br><a href="https://www.ticketone.it/en/" target="_blank" rel="noopener noreferrer">www.ticketone.it</a><br><br>‚Ä¢ <b>AS Roma</b> - entradas oficiales:<br><a href="https://www.asroma.com/en/tickets" target="_blank" rel="noopener noreferrer">www.asroma.com/tickets</a><br><br>‚Ä¢ <b>SS Lazio</b> - entradas oficiales:<br><a href="https://www.sslazio.it/en" target="_blank" rel="noopener noreferrer">www.sslazio.it/tickets</a>`
      },
      {
        k:"museos y sitios",
        keys:["museo","museos","sitio","sitios","monumentos","coliseo","vaticano"],
        t:()=>`<b>MUSEOS Y SITIOS ARQUEOL√ìGICOS</b><br><br>‚Ä¢ <b>Coliseo, Foro Romano y Palatino:</b><br><a href="https://colosseo.it/en" target="_blank" rel="noopener noreferrer">www.colosseo.it</a><br><br>‚Ä¢ <b>Museos Vaticanos y Capilla Sixtina:</b><br><a href="https://tickets.museivaticani.va/" target="_blank" rel="noopener noreferrer">tickets.museivaticani.va</a><br><br>‚Ä¢ <b>Museos de Roma</b> (Capitolinos, Ara Pacis, etc.):<br><a href="https://www.museiincomuneroma.it/en" target="_blank" rel="noopener noreferrer">www.museiincomuneroma.it</a>`
      },
      {
        k:"exposiciones",
        keys:["exposici√≥n","exposiciones","arte","shows","temporales"],
        t:()=>`<b>EXPOSICIONES Y MUESTRAS DE ARTE</b><br><br>‚Ä¢ <b>Musei in Comune</b> - exposiciones temporales:<br><a href="https://www.museiincomuneroma.it/en/exhibitions" target="_blank" rel="noopener noreferrer">www.museiincomuneroma.it/exhibitions</a><br><br>‚Ä¢ <b>Scuderie del Quirinale:</b><br><a href="https://www.scuderiequirinale.it/" target="_blank" rel="noopener noreferrer">www.scuderiequirinale.it</a><br><br>‚Ä¢ <b>MAXXI</b> - Museo de las Artes del siglo XXI:<br><a href="https://www.maxxi.art/en/" target="_blank" rel="noopener noreferrer">www.maxxi.art</a>`
      }
    ]
  }

}; /* <-- chiude const DATA */
  /* ============ RILEVAMENTO LINGUA + UI ============ */
const chatEl = document.getElementById('chat');
const input  = document.getElementById('input');
const sendBtn= document.getElementById('sendBtn');

const url = new URL(location.href);
let lang = (url.searchParams.get('lang') || localStorage.getItem('lang') || (navigator.language||'en').slice(0,2)).toLowerCase();
if(!DATA[lang]) lang='en';
url.searchParams.set('lang',lang); history.replaceState(null,'',url);
localStorage.setItem('lang',lang);

/* ============ TTS MULTILINGUA (voci preferite) ============ */
let voiceOn=false, pick=null;
const VOICE_PREFS = {
  en:['Samantha','Google US English','Google UK English Female','Microsoft Aria Online (Natural)'],
  it:['Alice','Eloisa','Google italiano','Microsoft Elsa Online (Natural)','Microsoft Isabella Online (Natural)'],
  fr:['Amelie','Thomas','Google fran√ßais','Microsoft Denise Online (Natural)','Microsoft Vivienne Online (Natural)'],
  de:['Anna','Markus','Google Deutsch','Microsoft Katja Online (Natural)','Microsoft Conrad Online (Natural)'],
  es:['Monica','Jorge','Paulina','Google espa√±ol','Microsoft Alvaro Online (Natural)']
};
function selectVoice(){
  if(!('speechSynthesis' in window)) return null;
  const all = speechSynthesis.getVoices()||[];
  const prefs = VOICE_PREFS[lang]||[];
  for(const name of prefs){
    const v = all.find(v => (v.name||'').toLowerCase()===name.toLowerCase());
    if(v) return v;
  }
  const byLang = all.find(v => (v.lang||'').toLowerCase().startsWith(lang));
  return byLang || all[0] || null;
}
function refreshVoice(){ pick = selectVoice(); }
if('speechSynthesis' in window){ refreshVoice(); speechSynthesis.onvoiceschanged = refreshVoice; }
function warm(){
  if(!('speechSynthesis' in window)) return;
  try{
    speechSynthesis.cancel();
    const dot = new SpeechSynthesisUtterance('.');
    dot.volume=0.01; if(pick) dot.voice=pick; dot.lang = pick?.lang || lang;
    speechSynthesis.speak(dot);
  }catch{}
}
function speak(t){
  if(!voiceOn || !('speechSynthesis' in window)) return;
  try{
    speechSynthesis.cancel();
    const u=new SpeechSynthesisUtterance(t);
    if(pick) u.voice=pick; u.lang = pick?.lang || lang;
    speechSynthesis.speak(u);
  }catch{}
}

document.getElementById('voiceBtn').addEventListener('click',e=>{
  voiceOn=!voiceOn; e.currentTarget.setAttribute('aria-pressed',String(voiceOn));
  applyUI(); if(voiceOn) warm();
});
document.querySelector('.lang').addEventListener('click',e=>{
  const btn=e.target.closest('[data-lang]'); if(!btn) return;
  lang = btn.getAttribute('data-lang');
  localStorage.setItem('lang',lang);
  const u=new URL(location.href); u.searchParams.set('lang',lang); history.replaceState(null,'',u);
  refreshVoice(); applyUI(); chatEl.innerHTML=''; welcome();
  if(voiceOn) warm();
});
function applyUI(){
  const L = DATA[lang].ui;
  document.getElementById('aptLabel').textContent = L.apt_label;
  document.getElementById('voiceBtn').textContent = voiceOn ? L.voice_on : L.voice_off;
  input.placeholder = L.placeholder;
  document.querySelectorAll('.lang [data-lang]').forEach(b=> b.setAttribute('aria-current', b.getAttribute('data-lang')===lang ? 'true':'false'));
}

/* ============ CHAT LOGIC + FEEDBACK ============ */
// trasforma http://... e https://... in <a>
function linkify(str){
  const urlRegex = /(https?:\/\/[^\s]+)/g;
  return str.replace(urlRegex, url => `<a href="${url}" target="_blank" rel="noopener noreferrer">${url}</a>`);
}

function add(type, txt){
  const d = document.createElement('div');
  d.className = 'msg ' + (type === 'me' ? 'me' : 'wd');
  // usiamo innerHTML cos√¨ i link sono cliccabili
  d.innerHTML = linkify(txt);
  chatEl.appendChild(d);
  chatEl.scrollTop = chatEl.scrollHeight;
  return d;
}
function detectIntent(text){
  const L = DATA[lang]; const t = (text||'').toLowerCase();
  let best=null,score=0;
  for(const it of L.intents){
    let s=0; for(const k of it.keys){ if(t.includes(k.toLowerCase())) s++; }
    if(s>score){ score=s; best=it; }
  }
  return best;
}
function getAnswer(text){
  const L = DATA[lang]; const apt=L.apt;
  const m = detectIntent(text);
  if(!m) return { text: L.ui.fallback, topic: 'fallback' };
  try{ return { text: m.t(apt), topic: m.k }; }catch{ return { text: L.ui.fallback, topic: 'fallback' }; }
}

 function postFeedback(vote, topic
function attachFeedbackUI(container, topic, answerText){
  const box = document.createElement('div');
  box.className = 'fb-box';
  const label = document.createElement('span');
  label.className = 'fb-label';
  label.textContent = 'Was this helpful?';
  const likeBtn = document.createElement('button');
  likeBtn.type='button'; likeBtn.textContent='üëç Like';
  const dislikeBtn = document.createElement('button');
  dislikeBtn.type='button'; dislikeBtn.textContent='üëé Dislike';
  const done = document.createElement('span');
  done.className='fb-done'; done.textContent='Thanks for your feedback!';
  done.style.display='none';
  function finish(v){
    likeBtn.disabled = true; dislikeBtn.disabled = true;
    likeBtn.style.opacity = 0.6; dislikeBtn.style.opacity = 0.6;
    done.style.display = 'inline';
    postFeedback(v, topic, answerText);
  }
  likeBtn.addEventListener('click', ()=>finish('like'));
  dislikeBtn.addEventListener('click', ()=>finish('dislike'));
  box.appendChild(label); box.appendChild(likeBtn); box.appendChild(dislikeBtn); box.appendChild(done);
  container.appendChild(box);
}

function welcome(){
  const L=DATA[lang].ui;
  const intro=document.createElement('div'); intro.className='intro';
  intro.innerHTML = `<b>${L.welcome}</b>`;
  chatEl.appendChild(intro);
  const q=document.createElement('div'); q.className='quick';
  for(const key of L.quick){
    const b=document.createElement('button'); b.textContent=key;
    b.onclick=()=>{ input.value=key; send(); };
    q.appendChild(b);
  }
  chatEl.appendChild(q);
}
function send(){
  const text=(input.value||'').trim(); if(!text) return;
  add('me',text); input.value='';
  const {text:bot, topic} = getAnswer(text);
  const botNode = add('wd',bot); speak(bot);
  attachFeedbackUI(botNode, topic, bot);
}
sendBtn.addEventListener('click',send);
input.addEventListener('keydown',e=>{ if(e.key==='Enter') send(); });
applyUI(); welcome();
</script>
</body>
</html>
